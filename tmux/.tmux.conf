set-option -ga terminal-overrides ',xterm-256color:RGB'

set-option -g focus-events on
set -g set-clipboard on
set -g allow-passthrough on
# increase scroll-back history
# set -g history-limit 10000

# use vim key bindings
setw -g mode-keys vi
set-option -g mouse on

# decrease command delay (increases vim responsiveness)
set -sg escape-time 1

# increase repeat time for repeatable commands
set -g repeat-time 1000

# start window index at 1
set -g base-index 1

# start pane index at 1
setw -g pane-base-index 1

# automatically renumber windows when one is closed
set -g renumber-windows on

# highlight window when it has new activity
setw -g monitor-activity on
set -g visual-activity on

###########################
#  Key Bindings
###########################

# tmux prefix
unbind C-b
set -g prefix C-j

# copy with 'enter' or 'y' and send to mac os clipboard: http://goo.gl/2Bfn8

# create 'v' alias for selecting text
bind-key -Tcopy-mode-vi 'v' send -X begin-selection
bind-key -Tcopy-mode-vi 'y' send -X copy-selection
#bind-key -Tcopy-mode-vi 'y' send -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
bind-key -Tcopy-mode-vi Escape send -X cancel
bind-key -Tcopy-mode-vi V send -X rectangle-toggle
# paste
unbind C-p
bind C-p paste-buffer

# windows back
unbind C-p
unbind C-b
bind Tab previous-window

# window splitting
unbind %
bind | split-window -h -c '#{pane_current_path}'
unbind '"'
bind - split-window -v

bind -r < swap-window -t :-1 \; select-window -t :-1
bind -r > swap-window -t :+1 \; select-window -t :+1

# prompt for a target index to swap with
bind S command-prompt -p "swap with window index:" "swap-window -t '%%'; select-window -t '%%'"

# resize panes
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# create 25% lower split
unbind t
bind t split-window -p 25

# quickly switch panes
unbind ^J
bind ^J select-pane -t :.+

# force a reload of the config file
unbind r
bind r source-file ~/.tmux.conf \; display "Reloaded!"

# override ctrl+k to do nothing (prevent terminal clearing)
unbind C-k
bind C-k send-keys ''

###########################
# Status Bar
###########################

# enable UTF-8 support in status bar

# set refresh interval for status bar
set -g status-interval 30

# center the status bar
set -g status-justify left

# show session, window, pane in left status bar
set -g status-left-length 40

set -g status-left '#[fg=green]#S#[fg=blue] #I:#P#[default]'
# --> Solarized Osaka
thm_bg="#001a1f"
thm_fg="#7e8993"
thm_cyan="#2d8f84"
thm_black="#000d0f"
thm_gray="#4a545c"
thm_magenta="#c2678a"
thm_pink="#c2678a"
thm_red="#c53929"
thm_green="#4d7f00"
thm_yellow="#996600"
thm_blue="#3182bd"
thm_orange="#b4571a"
catppuccin12="#002b36"

# ----------------------------=== Theme ===--------------------------

# status
set -g status-position top 
set -g status "on"
set -g status-bg "${thm_bg}"
set -g status-justify "left"
set -g status-left-length "100"
set -g status-right-length "100"

# messages
set -g message-style fg="${thm_cyan}",bg="${thm_bg}",align="centre"
set -g message-command-style fg="${thm_cyan}",bg="${thm_bg}",align="centre"

# panes
set -g pane-border-style fg="${thm_gray}"
set -g pane-active-border-style fg="${thm_blue}"

# windows
setw -g window-status-activity-style fg="${thm_fg}",bg="${thm_bg}",none
setw -g window-status-separator ""
setw -g window-status-style fg="${thm_fg}",bg="${thm_bg}",none

# show hostname and shortened current path in right status bar (max 3 levels)
set-option -g status-right '#[fg=green]#H#[default] #[fg=blue]#(echo "#{pane_current_path}" | sed "s|$HOME|~|" | awk -F/ "{if(NF>3) printf \"../\" substr(\$(NF-2),1,1) \"/\" substr(\$(NF-1),1,1) \"/\" \$NF; else print \$0}")#[default]'

# --------=== Statusline
set -g status-left ''

# current_dir
setw -g window-status-format "#[fg=$thm_bg,bg=$thm_gray] #I #[fg=$thm_fg,bg=$thm_bg] #{pane_current_command}(#(basename #{pane_current_path})) "
setw -g window-status-current-format "#[fg=$thm_bg,bg=$thm_orange] #I #[fg=$thm_cyan,bg=$thm_bg] #{pane_current_command}(#(basename #{pane_current_path})) "
